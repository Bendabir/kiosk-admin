<ng-container *ngIf="files$ | async as files; else loadingOrError">
    <app-splash *ngIf="!files.length" [splash]="noFileSplash"></app-splash>
    <mat-list *ngIf="files.length">
        <mat-list-item *ngFor="let f of files">
            <img mat-list-avatar [src]="link(f.filename)">
            <h4 mat-line>{{ f.filename }}</h4>
            <p mat-line>Created on {{ f.creationDate | date: 'medium' }}</p>
            <p mat-line>{{ f.mimeType }} &ndash; {{ f.size | bytes }}</p>
            <div class="actions">
                <button mat-icon-button matTooltip="Copy link to clipboard" (click)="copyToClipboard(link(f.filename))">
                    <mat-icon>file_copy</mat-icon>
                </button>
                <a mat-icon-button matTooltip="Open in new tab" [href]="link(f.filename)" target="_blank">
                    <mat-icon>open_in_new</mat-icon>
                </a>
                <button mat-icon-button matTooltip="Delete" color="warn" (click)="delete(f)">
                    <mat-icon>delete</mat-icon>
                </button>
            </div>
        </mat-list-item>
    </mat-list>
</ng-container>

<ng-template #loadingOrError>
    <app-splash *ngIf="errorSplash" [splash]="errorSplash"></app-splash>
    <app-loader *ngIf="!errorSplash"></app-loader>
</ng-template>
